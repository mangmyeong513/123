<!-- odd_even_demo.html â€” í•™ìŠµìš© ë°ëª¨ (ì‹¤ì œ ê²°ì œ ì—†ìŒ) -->
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>í™€ì§ ë°ëª¨ (í•™ìŠµìš©)</title>
<style>
  body{font-family:system-ui,Segoe UI,Apple SD Gothic Neo,"Malgun Gothic",sans-serif;background:#0f172a;color:#e6eef8;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
  .card{width:380px;padding:20px;border-radius:12px;background:linear-gradient(180deg,#111827, #0b1220);box-shadow:0 8px 30px rgba(2,6,23,0.7);}
  h1{margin:0 0 12px;font-size:20px}
  .balance{font-weight:700;margin-bottom:12px}
  .row{display:flex;gap:8px;margin-bottom:10px}
  input[type=number]{flex:1;padding:8px;border-radius:8px;border:1px solid #223046;background:#071126;color:#e6eef8}
  button{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:white;cursor:pointer}
  .btn-odd{background:#ef4444}
  .btn-even{background:#10b981}
  .log{height:140px;overflow:auto;background:#071024;padding:8px;border-radius:8px;border:1px solid #13233a;font-size:13px}
  .result{margin-top:10px;font-weight:700}
  .muted{font-size:12px;color:#93c5fd}
</style>
</head>
<body>
  <div class="card">
    <h1>í™€ì§ ë°ëª¨ â€” êµìœ¡ìš© (ì‹¤ì œ ê²°ì œ ì—†ìŒ)</h1>
    <div class="balance">ì”ì•¡: <span id="balance">1000</span> ì½”ì¸</div>

    <div class="row">
      <input id="betAmount" type="number" min="1" value="100" />
      <select id="multiplier"><option value="2">ë°°ìˆ˜: 2x (ìŠ¹ë¦¬ ì‹œ ë°°ë‹¹)</option></select>
    </div>

    <div class="row">
      <button id="btnOdd" class="btn-odd">í™€ì— ë² íŒ…</button>
      <button id="btnEven" class="btn-even">ì§ì— ë² íŒ…</button>
      <button id="btnReset" style="background:#64748b">ë¦¬ì…‹</button>
    </div>

    <div class="result" id="resultText">ê²°ê³¼ ëŒ€ê¸° ì¤‘</div>
    <div class="muted">ë‚œìˆ˜: ì•”í˜¸í•™ì  RNG ì‚¬ìš© (crypto.getRandomValues)</div>

    <h3 style="margin-top:12px">í”Œë ˆì´ ë¡œê·¸</h3>
    <div class="log" id="log"></div>
  </div>

<script>
  // ì•ˆì „: ë¸Œë¼ìš°ì € ë‚´ì—ì„œë§Œ ë™ì‘, ê²°ì œ/ë„¤íŠ¸ì›Œí¬ ì—†ìŒ
  const balanceEl = document.getElementById('balance');
  const betInput = document.getElementById('betAmount');
  const logEl = document.getElementById('log');
  const resultText = document.getElementById('resultText');

  let balance = 1000;
  const houseEdge = 0.0; // ë°ëª¨: ì§‘ ì”ì—¬ ìˆ˜ìˆ˜ë£Œ 0ìœ¼ë¡œ ë‘  (ì—°êµ¬ìš©)
  const multiplier = 2; // ë‹¨ìˆœ 2ë°° ë°°ë‹¹ (ê³µì •ì„± êµìœ¡ìš©)

  function saveBalance() {
    // ë¡œì»¬ì—ì„œëŠ” ì €ì¥ ê°€ëŠ¥ â€” í•™ìŠµìš©
    localStorage.setItem('demo_balance', String(balance));
  }
  function loadBalance(){
    const v = localStorage.getItem('demo_balance');
    if(v) balance = Number(v);
    balanceEl.textContent = balance;
  }

  function log(msg){
    const t = new Date().toLocaleTimeString();
    logEl.innerHTML = `<div>[${t}] ${msg}</div>` + logEl.innerHTML;
  }

  // ì•”í˜¸í•™ì  ë‚œìˆ˜: 1~6 ì£¼ì‚¬ìœ„ì²˜ëŸ¼ ìƒì„± (ì—¬ê¸°ì„  1~10)
  function secureRandomInt(min, maxInclusive){
    const range = maxInclusive - min + 1;
    const maxUint32 = 0xFFFFFFFF;
    const biasZone = Math.floor(maxUint32 / range) * range;
    const arr = new Uint32Array(1);
    while(true){
      crypto.getRandomValues(arr);
      const r = arr[0];
      if(r < biasZone){
        return min + (r % range);
      }
    }
  }

  function play(betChoice){ // 'odd' or 'even'
    const bet = Math.floor(Number(betInput.value));
    if(!Number.isFinite(bet) || bet <= 0){ alert('ë°°íŒ…ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì¤˜ ã…‡'); return; }
    if(bet > balance){ alert('ì”ì•¡ ë¶€ì¡± ã…‡'); return; }

    // ì°¨ë‹¨: ì‹¤ì œ ê²°ì œ ê´€ë ¨ ë™ì‘ ì—†ìŒ
    // ê²°ê³¼ ìƒì„±
    const roll = secureRandomInt(1, 10); // 1~10
    const isEven = (roll % 2 === 0);
    const won = ( (isEven && betChoice === 'even') || (!isEven && betChoice === 'odd') );

    // ì†ìµ ê³„ì‚° (ë°ëª¨: ë°°ë‹¹ multiplier, ì§‘ìŠ¹ë¥  = houseEdge)
    let payout = 0;
    if(won){
      payout = Math.floor(bet * (multiplier - 1)); // ìˆœì´ìµ
      balance += payout;
    } else {
      balance -= bet;
    }
    saveBalance();
    balanceEl.textContent = balance;

    // ì—…ë°ì´íŠ¸ UI
    resultText.textContent = `ì£¼ì‚¬ìœ„: ${roll} (${isEven ? 'ì§' : 'í™€'}) â†’ ${won ? 'ìŠ¹ë¦¬ ğŸ‰' : 'íŒ¨ë°° ğŸ˜­'} / ${won ? ('+'+payout) : ('-'+bet)} ì½”ì¸`;
    log(`ë² íŒ…: ${bet}ì½”ì¸ â†’ ì„ íƒ: ${betChoice} / ë‚˜ì˜¨ê°’: ${roll} / ${won ? 'ìŠ¹' : 'íŒ¨'} / ì”ì•¡: ${balance}ì½”ì¸`);
  }

  document.getElementById('btnOdd').addEventListener('click', ()=>play('odd'));
  document.getElementById('btnEven').addEventListener('click', ()=>play('even'));
  document.getElementById('btnReset').addEventListener('click', ()=>{
    if(confirm('ì”ì•¡ì„ ì´ˆê¸°í™”í• ë˜? (í•™ìŠµìš©)')){ balance = 1000; saveBalance(); balanceEl.textContent = balance; log('ì”ì•¡ ì´ˆê¸°í™”'); resultText.textContent='ê²°ê³¼ ëŒ€ê¸° ì¤‘'; }
  });

  // ì´ˆê¸° ë¡œë“œ
  loadBalance();
  log('ë°ëª¨ ì‹œì‘ â€” ì‹¤ì œ í™”íì™€ ì—°ê²° ê¸ˆì§€ë¨');
</script>
</body>
</html>
